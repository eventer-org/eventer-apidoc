components:
  schemas:
    Event:
      type: object
      properties:
        id:
          type: integer
          format: int64
        title:
          type: string
        description:
          type: string
        categories:
          uniqueItems: true
          type: array
          items:
            type: string
        link:
          type: string
        contexts:
          uniqueItems: true
          type: array
          items:
            type: string
        google_place_id:
          type: string
        updated_at:
          type: string
          format: date-time
        deleted_at:
          type: string
          format: date-time
        starts_at:
          type: string
          format: date-time
    GeoArea:
      type: object
      properties:
        bottom:
          description: 'The bottom (latitude) of the geo bounding rectangle.'
          type: number
          format: double
          required: true
          example: 50.827132
        top:
          description: 'The top (latitude) of the geo bounding rectangle.'
          type: number
          format: double
          required: true
          example: 50.838948
        right:
          description: 'The right (longitude) of the geo bounding rectangle.'
          type: number
          format: double
          required: true
          example: 12.933774
        left:
          description: 'The left (longitude) of the geo bounding rectangle.'
          type: number
          format: double
          required: true
          example: 12.912577
    DiscoverRequest:
      type: object
      properties:
        search:
          description: Searches events by a free text search.
          type: string
          required: false
          example: Party
        starts_at_min:
          description: The minimum starts-at timestamp for events. If not given the
            default value will be now.
          type: string
          format: date-time
          required: false
        starts_at_max:
          description: The maximum starts-at timestamp for events.
          type: string
          format: date-time
          required: false
        categories:
          description: 'A comma separated list of event categories to search for (not
            all events are categorized yet). If not specified all events of all categories
            (or without category) will be returned.<br/><br/>Currently the following
            categories are supported: <br/>`exhibition`, `meetup`, `movie`'
          type: array
          items:
            type: string
          required: false
          example: [meetup, movie]
        google_place_ids:
          description: 'A comma separated list of ids of google places to restrict search to events from these places only.
            <br/>You can use the google maps api to search for google place ids: 
            [google place id finder](https://developers.google.com/maps/documentation/javascript/examples/places-placeid-finder)'
          type: array
          items:
            type: string
            example: ChIJQ7SzNXtGp0cRZwiPGboZQJo
          style: simple
          required: false
        geo_area:
          description: 'Restricts the event search to a geo area bounding box specified by 4 comma separated coordinates:
            top (latitude), left (longitude), bottom (latitude) and right (longitude).'
          $ref: '#/components/schemas/GeoArea'
        geo_raster_points:
          type: array
          items:
            type: array
            items:
              type: number
              format: double
        contexts:
          type: array
          items:
            type: string
        updated_since:
          type: string
          format: date-time
        include:
          $ref: '#/components/schemas/DiscoverRequestIncludeType'
        limit:
          type: integer
          format: int32
        cursor:
          type: string
    DiscoverRequestIncludeType:
      type: object
      properties:
        places:
          type: object
    DiscoverResponse:
      type: object
      properties:
        events:
          type: array
          items:
            $ref: '#/components/schemas/Event'
        places:
          type: object
          additionalProperties:
            $ref: '../places/components.yaml#/components/schemas/Place'
        cursor:
          type: string
        request:
          $ref: '#/components/schemas/DiscoverRequest'
        timestamp:
          type: string
          format: date-time
        primary_google_place_ids:
          type: object
          additionalProperties:
            type: string